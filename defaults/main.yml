---
postgresql:
  version: 9.1
  repo: 'deb http://apt.postgresql.org/pub/repos/apt/ precise-pgdg main'
  install_development_headers: false

  user: postgres
  group: postgres

  config:
    shared_buffers: "{{ ansible_memtotal_mb / 4 }}MB"
    work_mem: 1MB

    checkpoint_segments: 3
    checkpoint_completion_target: 0.5

    effective_cache_size: "{{ ansible_memtotal_mb / 4 * 3 }}MB"

pgbouncer:
  user: postgres
  group: postgres

  config:
    database_host: 127.0.0.1
    database_port: 5432

    listen_addr: 127.0.0.1
    listen_port: 6432

    user: postgres

    auth_type: md5
    auth_file: /etc/pgbouncer/userlist.txt
